{"ast":null,"code":"import _regeneratorRuntime from\"D:/Mihai/pet-food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Mihai/pet-food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Mihai/pet-food/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from'react';import M from'materialize-css';import{projectAuth,projectFirestore}from'../firebase/config';import Loading from'./Loading';import UpdateProfile from'./UpdateProfile';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Dashboard=function Dashboard(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),userName=_useState2[0],setUserName=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),authUser=_useState4[0],setAuthUser=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),uid=_useState6[0],setUid=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),userData=_useState8[0],setUserData=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),render=_useState10[0],setRender=_useState10[1];useEffect(function(){var elems=document.querySelectorAll('.modal');var instances=M.Modal.init(elems,{});},[render]);useEffect(function(){var unlisten=projectAuth.onAuthStateChanged(function(authUser){if(authUser){setAuthUser(authUser);setUserName(authUser.displayName);setUid(authUser.uid);}else{setAuthUser(null);}});return function(){unlisten();};});useEffect(function(){var fetchUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var userRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:userRef=projectFirestore.collection(\"users\").doc(uid);_context.next=3;return userRef.get().then(function(doc){setUserData(doc.data());});case 3:return _context.abrupt(\"return\",setRender(true));case 4:case\"end\":return _context.stop();}}},_callee);}));return function fetchUser(){return _ref.apply(this,arguments);};}();return function(){fetchUser();};});if(!authUser){return/*#__PURE__*/_jsx(Loading,{});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"center\",children:[\"Hello \",userName]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col s12 m8 offset-m2 l6 offset-l3 center\",children:[userData?/*#__PURE__*/_jsxs(\"h5\",{children:[\"City:\",userData.city]}):/*#__PURE__*/_jsx(\"h5\",{children:\"City:Update\"}),userData?/*#__PURE__*/_jsxs(\"h5\",{children:[\"Bio:\",userData.bio]}):/*#__PURE__*/_jsx(\"h5\",{children:\"Bio:Update\"}),/*#__PURE__*/_jsx(\"a\",{className:\"waves-effect waves-light btn-large modal-trigger color green accent-4 center\",href:\"#modal\",children:\"Update details\"}),/*#__PURE__*/_jsx(\"div\",{id:\"modal\",className:\"modal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-content\",children:/*#__PURE__*/_jsx(UpdateProfile,{userid:uid})})})]})})]});};export default Dashboard;","map":{"version":3,"sources":["D:/Mihai/pet-food/src/components/Dashboard.js"],"names":["useEffect","useState","M","projectAuth","projectFirestore","Loading","UpdateProfile","Dashboard","userName","setUserName","authUser","setAuthUser","uid","setUid","userData","setUserData","render","setRender","elems","document","querySelectorAll","instances","Modal","init","unlisten","onAuthStateChanged","displayName","fetchUser","userRef","collection","doc","get","then","data","city","bio"],"mappings":"qZAAA,OAAQA,SAAR,CAAkBC,QAAlB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,CAAP,KAAc,iBAAd,CACA,OAAQC,WAAR,CAAoBC,gBAApB,KAA2C,oBAA3C,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,C,wFAEA,GAAMC,CAAAA,SAAS,CAAI,QAAbA,CAAAA,SAAa,EAAM,eAEQN,QAAQ,CAAC,IAAD,CAFhB,wCAEhBO,QAFgB,eAEPC,WAFO,8BAGQR,QAAQ,CAAC,IAAD,CAHhB,yCAGhBS,QAHgB,eAGPC,WAHO,8BAIJV,QAAQ,EAJJ,yCAIhBW,GAJgB,eAIZC,MAJY,8BAKMZ,QAAQ,EALd,yCAKhBa,QALgB,eAKPC,WALO,8BAMEd,QAAQ,CAAC,IAAD,CANV,0CAMhBe,MANgB,gBAMTC,SANS,gBAQtBjB,SAAS,CAAC,UAAI,CACb,GAAIkB,CAAAA,KAAK,CAAGC,QAAQ,CAACC,gBAAT,CAA0B,QAA1B,CAAZ,CACA,GAAIC,CAAAA,SAAS,CAAGnB,CAAC,CAACoB,KAAF,CAAQC,IAAR,CAAaL,KAAb,CAAmB,EAAnB,CAAhB,CACA,CAHQ,CAGP,CAACF,MAAD,CAHO,CAAT,CAQAhB,SAAS,CAAC,UAAI,CACb,GAAMwB,CAAAA,QAAQ,CAAGrB,WAAW,CAACsB,kBAAZ,CACd,SAAAf,QAAQ,CAAI,CACV,GAAGA,QAAH,CACA,CAAEC,WAAW,CAACD,QAAD,CAAX,CACDD,WAAW,CAACC,QAAQ,CAACgB,WAAV,CAAX,CACAb,MAAM,CAACH,QAAQ,CAACE,GAAV,CAAN,CACA,CAJD,IAKO,CAACD,WAAW,CAAC,IAAD,CAAX,CAAkB,CAC3B,CARa,CAAjB,CAUC,MAAM,WAAI,CACTa,QAAQ,GACR,CAFD,CAIH,CAfU,CAAT,CAiBDxB,SAAS,CAAC,UAAI,CACZ,GAAM2B,CAAAA,SAAS,0FAAG,+IACVC,OADU,CACAxB,gBAAgB,CAACyB,UAAjB,CAA4B,OAA5B,EAAqCC,GAArC,CAAyClB,GAAzC,CADA,uBAETgB,CAAAA,OAAO,CAACG,GAAR,GACNC,IADM,CACD,SAACF,GAAD,CAAO,CACXf,WAAW,CAACe,GAAG,CAACG,IAAJ,EAAD,CAAX,CACD,CAHM,CAFS,wCAMThB,SAAS,CAAC,IAAD,CANA,wDAAH,kBAATU,CAAAA,SAAS,0CAAf,CASA,MAAO,WAAI,CACTA,SAAS,GACV,CAFD,CAGD,CAbQ,CAAT,CAeG,GAAG,CAACjB,QAAJ,CAAc,CACb,mBAAO,KAAC,OAAD,IAAP,CACA,CAAE,mBACD,aAAK,SAAS,CAAC,WAAf,wBACE,YAAI,SAAS,CAAC,QAAd,oBAA8BF,QAA9B,GADF,cAEE,YAAK,SAAS,CAAC,KAAf,uBACG,aAAK,SAAS,CAAC,0CAAf,WAEEM,QAAQ,cAAI,8BAAUA,QAAQ,CAACoB,IAAnB,GAAJ,cACL,mCAHL,CAMEpB,QAAQ,cAAI,6BAASA,QAAQ,CAACqB,GAAlB,GAAJ,cACL,kCAPL,cAWE,UAAG,SAAS,CAAC,8EAAb,CAA4F,IAAI,CAAC,QAAjG,4BAXF,cAYE,YAAK,EAAE,CAAC,OAAR,CAAgB,SAAS,CAAC,OAA1B,uBACE,YAAK,SAAS,CAAC,eAAf,uBACE,KAAC,aAAD,EAAe,MAAM,CAAEvB,GAAvB,EADF,EADF,EAZF,GADH,EAFF,GADC,CA2BP,CA7ED,CA+EA,cAAeL,CAAAA,SAAf","sourcesContent":["import {useEffect,useState} from 'react'\r\nimport M from 'materialize-css'\r\nimport {projectAuth,projectFirestore} from '../firebase/config'\r\nimport Loading from './Loading'\r\nimport UpdateProfile from './UpdateProfile'\r\n\r\nconst Dashboard =  () => {\r\n\r\n   const[userName,setUserName] = useState(null)\r\n   const[authUser,setAuthUser] = useState(null)\r\n   const[uid,setUid]=useState()\r\n   const[userData,setUserData]=useState()\r\n   const[render,setRender]=useState(null)\r\n\r\n   useEffect(()=>{\r\n    let elems = document.querySelectorAll('.modal');\r\n    let instances = M.Modal.init(elems,{});\r\n   },[render])\r\n\r\n  \r\n \r\n\r\n   useEffect(()=>{\r\n    const unlisten = projectAuth.onAuthStateChanged(\r\n       authUser => {\r\n         if(authUser)\r\n         { setAuthUser(authUser)\r\n          setUserName(authUser.displayName)\r\n          setUid(authUser.uid)\r\n         }\r\n           else {setAuthUser(null)}\r\n       },       \r\n    )\r\n     return()=>{\r\n      unlisten()\r\n     };\r\n    \r\n });\r\n\r\n  useEffect(()=>{\r\n    const fetchUser = async ()=> {\r\n      const userRef = projectFirestore.collection(\"users\").doc(uid)\r\n       await userRef.get()\r\n      .then((doc)=>{\r\n        setUserData(doc.data())\r\n      })\r\n      return setRender(true)\r\n    }\r\n\r\n    return ()=>{ \r\n      fetchUser()\r\n    } \r\n  })\r\n\r\n     if(!authUser) {\r\n      return <Loading/>\r\n     }  return (\r\n       <div className=\"container\">\r\n         <h2 className=\"center\">Hello {userName}</h2>\r\n         <div className=\"row\">\r\n            <div className=\"col s12 m8 offset-m2 l6 offset-l3 center\">\r\n            {\r\n              userData ? (<h5>City:{userData.city}</h5>)\r\n              : (<h5>City:Update</h5>)\r\n            }\r\n            {\r\n              userData ? (<h5>Bio:{userData.bio}</h5>)\r\n              : (<h5>Bio:Update</h5>)\r\n\r\n            }\r\n              \r\n              <a className=\"waves-effect waves-light btn-large modal-trigger color green accent-4 center\" href=\"#modal\">Update details</a>\r\n              <div id=\"modal\" className=\"modal\">\r\n                <div className=\"modal-content\">\r\n                  <UpdateProfile userid={uid}/> \r\n                </div>\r\n              </div>\r\n            </div>\r\n         </div>      \r\n       </div>\r\n        );\r\n     \r\n\r\n}\r\n \r\nexport default Dashboard;"]},"metadata":{},"sourceType":"module"}